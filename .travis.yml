language: node_js
node_js: 8.10.0
install:
- npm install
- npm run decrypt-variables -- $SECRETS_ENCRYPTION_KEY
addons:
  apt:
    packages:
    - sshpass
deploy:
  provider: script
  script: "/bin/bash scripts/deploy.sh"
  on:
    branch: master
script:
- npm t
env:
  global:
  - secure: Vrj6ybU2yYQcJaoexCXUWApEN7duWtH96jt6jg9A13SE5iz2YaAhYoi7XuYuuIQ4zPAVrBjeaV58xK0Iq7PaMf4bpGEZhN0bOLusf+3ongaNQj5WcRcf4V3MPF0hWoeXuJ9pirMMtT/XHR0/iqUAqdw1WVR+boyhAfTlm7nKiRi13vlykuYB8+axhaTrVgdKrEhyHvT+jI/AFg8JeFTZzhluRS/YEhUrF9H5m1Dbad40WgJChJLUI4Plpx8FpuB0CI+DBYQgIxwmbUElmvluTd7jELDeVo/FfqPsOQDlW3zA7vji90V0j+SCSPPUugd32GqYGGFuZVYU6x8qg5q5LH7+FjB1rpn+IP6G0wxrv/BNScDT3cWwe7elxKmSzPuHlXPhVHk+HsLGcR1Tqzz8grX1wYA5s0aA9S5/sQbUXKOhbOYBpW6H2sP1ei168QsVqhRWCDMbaMWTAZncmaY737KCD3C9qVTID+nIy/wrZcxUBCy0esobln4fZsusgJ9xIlR8cDFel7kwx9C3lDxIlCfRvJci2xS2KkMQDDVEvQwIWKPVCJ/+KVzdgURBE2icdOci3zJvUScVdHmhA/xI5Q4F7eWLHFaNl8OkJWwCU7bmH8nVHu+AJwyA4oJ2R1xFlllI43SOr5t0Q3aappRwAp+I5aLV8F20qCvg6N4FUI0=
  - secure: myv5RlReMLmDHAf59lNZTnQXf3NErMsbptEhk3VCKfItQ5B0QP+Z5FxRb2hqvCxx5q74+GvHg+4txugTHaeA6yN6YAPX8fzZLq/K8cB+iMKRzHs5GMcXBM5IDKWQ9kS0BnKbwFDhABi13ty/VmgviFQt2XpoVQ5d8buA6awPhWXIOC+H0PNgoCkHV9cwmbIMCKT8OV4rZH7qDUQHr0H50eJ7Ej4UpPk15y5IaO06fF8gtZ3KRkqBVScufdC5EXYyYZW3ivKMj5IQwk9qgzasdZPOY3XSYlt6Na4t8ImRFStbErQtFQ0gNBAv/un66kl8ycLqTVdnuUr6IiGkGeuH7nFXBqeXX3/FarQGebZcdtwCaFlJ2wbQSaVFtVhto+S/wrWOFkn1jUv94K1FqwhoUJXEheFluONBos5qhWSiNed7kqNB4wSVs2LdYvTvXmDGyhXuc94j54aCRrJZCNO+wilCoYH/hQo3mfjD/1jNlcwWVrnPVcAmDd9E2KT6JzsKN3jOWBAiRk3yXeVyIECpVwYZqwaVAACG10hhrAGutFYsjG2DyMoXpsfwej36I2ZagEnD5jikXAwwECOnMC7+uLpfUige6m6jThjfd6XdaNkXv7Sn+OJjNCpbLOESR4WbYU+pA0gnJvqhFO00lga+SLknugHRTLdZW6J9LXVv7BY=
  - secure: ki0G8RbfX65J50ViFPZD4oWWUt7ZFgdj4P04h52TgE9l3qvkSF/1wTCCM8J5x0dAne/YIBTdk1Goqo3jLnwVGNp+70qTbSYNy1YXJwByWsJlCeSfNAY/VQ+wzYhKwAoQXjOi8QrDwD3QCt6fhNjomiOYs6hGdnuMrZ4sjR6/hJ9TiA/GVBNP+CPzj8q+R9tBWgcid2+F5XcmyFOJPsrpC4ZTe44SlH9DI3zSbc+ND8ovUQkU6ZnCPw/jiQ3+Smh9YONgQDkukOzBf1AGKzMfV+9DobrBvFJzRrVEKhzEK8Cm2hBSSKltZWAuSkTrcLaxn5VDsDbxvQXlj2tWzDUmvYbicYG5+FSHQA27aU+T3kIekX/SvGFWIDDbvOoJsbPl7XSCWqCAR4EjhnPHGAirGUcPv3iTKXIE0ypNd41CF0I0317AwrdngieoLRyd7MvlSTlWCoUc8tT5cN1g6UNNVMdXZD5XZzdXNOuPNITKRypDebzcDKaJVdxFvGm5N2isasBXwhzto06GOXoPt8NgCTuk5wxYkmuA5JanxiKN594h1C+hEiw+7RJ1itVQ8P3eBdJfdS7eG3g6D5PlX5C+1Krx01uHZw+pej0W0RrFCy3dM806/7dss2oOiciL0PpCsXdJAqwMBZqh2Tjifltt0a1/a4LcOqzt8Z5SZr4FOQM=
  - secure: c/DUMPh2s5G7YaAXUcoU/ESejkskC0hZets8XTVYbkU0KKVPDa0/R84lai5lf52Qx9c3LQEqCd0CsAPHmwi9Z6TfPL1lEIx9seoVnaxush63Tku+AiKaC3XKZAlDAjsBbwiNil2koYPkr/JwEqbf3cr88NwVy6sUVZO4XUlzJK4o4v4A45WNFBI4A8eFFi5dgK7W8Y+Fpse4LsnRx1xi4kqUxr0HaZ23u5Ngwyp8bRbSdbz1eyJ3ZGgwfqgPFMXULkb94l/gRGPyM/3/1cFOUBT7k/fkYXal68NuG82kXxBAXXNVDJ73C3hqgRt+Ul83jC41ZNeWycuKWf+8tyxIEpzINUE+3rKwnDVSCx4rfaqt5EcuhM5AKFGMPCfrzcha3CXfBuCwZjsZBrYEaC2GfwVDUmD0KmmqKTOl5y47PXlafCM3EwYeaeUZCVHtXZk4pa+OUDeVAp1U06WWRviD4+hEKCj+uCPMXzH6L5BojPvTva80HvzN5K0LTD07XETmUMycrJXCVxrFfAWJAgDDZOwWbyYNpFjZXiKtFkyAiv2X3PA5TtGbPCyefiouNnLPQkPKaPImZ6xfGfhboWL+4WUEw76gqKEyf53MXrBPDCLW/eAD6es46FTigia/PRxo0ym2MB1R+6DaVfJFbCNIIiPsDyiyISolY9En/vScT4U=
  - secure: EuZUta34nSEhQEHHPb3HBC+kfhaKTtQoGOYMy2PUQt0kLA6RbeeL1Tc2+ar5rAJaS+M5nh2PwI9IUhjECEh6i5cO+uW4vr2UxKYuVzxy9Nb+Jvi7DY9oVT0xNShLY4+dbgPIovMe1XHY/zXOvrVtQbtcmJLOKaMR2ARRiGymmjyb7jHuKujpRDQRTlVFrpiFAXLu0N/VgQhR5m0NpGj56xIewPF3FQGmqbhHa108IzSL50+LiwprUmFZywPp1ZghWtaw5DnndptK3/gOze4R/owbEOGY800lYFHwXOhm8xxSngisKj/M3kkTi5gnPY+Lh2JufkOHrYkYchLhrBcxWyr5v3LTF+LFPQydmwtmhjzpbDcChu7QR/jPYV/DTjTgLouoKnnZfxm/QtE3LXDNlfPjXBiSBvFOgZJbfHYhE2Alsnf1aq5d672c7xrN26omPHrllodDub/va7Q4kNd6koO9TdEgKnjPRXHvR7+ZSKbpDf5cl4ZNKeLrOeMXJq5oliIYe7LFlnxFKSStTGalWHKgJ2hxsJ9FXushQE8XHOn9nVV6ArJ9UIWsfbP1r4pYliCu1tlN+QEXTfjf7nCxdHubc9JPajICZahl5jVUjARLw70iQoIL1YArfkia+bSOe3hmkuKmlO3PSy1wdtAckGrri8sEYHOcqMbkb9Dvkmc=
